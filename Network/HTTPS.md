# HTTPS

### HTTPSλ€?

HTTPλ” Hypertext Transfer Protocolμ μ•½μλ΅ Hypertext μΈ HTMLμ„ μ „μ†΅ν•κΈ° μ„ν• ν†µμ‹ κ·μ•½μ„ μλ―Έν•λ‹¤. HTTPλ” μ•”νΈν™”λμ§€ μ•μ€ λ°©λ²•μΌλ΅ λ°μ΄ν„°λ¥Ό μ „μ†΅ν•κΈ° λ•λ¬Έμ— μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈκ°€ μ£Όκ³  λ°›λ” λ©”μ‹μ§€λ¥Ό μ•…μμ μΌλ΅ κ°μ²­ν•κ³  μ΅°μ‘λκΈ° μ‰½λ‹¤. μ΄λ¬ν• HTTPλ¥Ό λ³΄μ™„ν•κ³ μ λ“±μ¥ν• κ²ƒμ΄ HTTPSμ΄λ‹¤. HTTPSμ—μ„ λ§μ§€λ§‰ Sλ” Over Secure Socket Layerμ μ•½μλ΅ **λ³΄μ•μ„ κ°•ν™”ν• HTTP**λΌκ³  λ³Ό μ μλ‹¤. HTTPSλ” HTTPμ ν•λ¶€μ— SSL(or TLS)κ³Ό κ°™μ€ λ³΄μ• κ³„μΈµμ„ μ κ³µν•¨μΌλ΅μ¨ λ™μ‘ν•λ©° λ¨λ“  μ”μ²­κ³Ό μ‘λ‹µμ€ λ„¤νΈμ›ν¬λ΅ λ³΄λ‚΄μ§€κΈ° μ „μ— μ•”νΈν™”λλ‹¤.

HTTP λ¬Έμ μ 

- HTTPλ” ν‰λ¬Έ ν†µμ‹ μ΄κΈ° λ•λ¬Έμ— λ„μ²­μ΄ κ°€λ¥ν•λ‹¤ - (μ•”νΈν™”)
- ν†µμ‹  μƒλ€λ¥Ό ν™•μΈν•μ§€ μ•κΈ° λ•λ¬Έμ— μ„μ¥μ΄ κ°€λ¥ν•λ‹¤ - (μ…μ¦)
- μ™„μ „μ„±μ„ μ¦λ…ν•  μ μ—†κΈ° λ•λ¬Έμ— λ³€μ΅°κ°€ κ°€λ¥ν•λ‹¤. - (λ¬΄κ²°μ„±)

μ΄λ¬ν• λ¬Έμ μ μ„ ν•΄κ²°ν•κΈ° μ„ν•΄ HTTPSκ°€ λ“±μ¥ν–λ‹¤.

- HTTP ν†µμ‹ ν•λ” μ†μΌ“ λ¶€λ¶„μ„ μΈν„°λ„· μƒμ—μ„ μ •λ³΄λ¥Ό μ•”νΈν™”ν•λ” SSL(Secure Socket Layer)λΌλ” ν”„λ΅ν† μ½λ΅ λ€μ±„ν•¨
- HTTPλ” TCPμ™€ ν†µμ‹ ν–μ§€λ§, HTTPSμ—μ„λ” HTTPλ” SSLκ³Ό ν†µμ‹ ν•κ³  SSLμ΄ TCPμ™€ ν†µμ‹ ν•κ² λλ‹¤.
- HTTPSμ SSLμ—μ„λ” λ€μΉ­ν‚¤ μ•”νΈν™” λ°©μ‹κ³Ό κ³µκ°ν‚¤ μ•”νΈν™” λ°©μ‹μ„ λ¨λ‘ μ‚¬μ©ν•λ‹¤.

</br>

### SSL(Secure Socket Layer)

SSLμ„ HTTPSμ™€ κ°™μ€ κ°λ…μΌλ΅ νΌμ©ν•΄μ„ μ–ΈκΈ‰μ΄ λκΈ°λ„ ν•λ”λ° μ—„λ°€ν λ”°μ§€μλ©΄ HTTPSλ” SSL μ„μ—μ„ λ™μ‘ν•λ” ν”„λ΅ν† μ½μ΄λ‹¤. κΈ°μ΅΄ HTTPμ—μ„λ” TCPμ™€ κ°™μ€ μ „μ†΅κ³„μΈµκ³Ό ν†µμ‹ ν•κΈ° μ„ν•΄ μ†μΌ“μ„ μ΄μ©ν•μ€λ‹¤. λ°λ©΄ HTTPSμ—μ„λ” μ‘μ©κ³„μΈµκ³Ό μ „μ†΅κ³„μΈµ μ‚¬μ΄μ— SSLκ³„μΈµμ„ λ‘μ–΄ μ†μΌ“μ„ SSLκ³Ό μ—°κ²°ν•κ³  SSLμ΄ μ „μ†΅κ³„μΈµκ³Ό ν†µμ‹ μ„ ν•¨μΌλ΅μ¨ λ³΄μ• κΈ°λ¥μ„ μ κ³µν•λ‹¤. 

\* SSLμ΄ μ μ°¨ λ³΄νΈν™”λλ©΄μ„ κµ­μ  ν‘μ¤€ν™” κΈ°κµ¬(IETF)μ—μ„ μ΄λ¥Ό κ΄€λ¦¬ν•κΈ° μ‹μ‘ν•¨. μ΄ λ• SSL μ΄λ¦„μ΄ TLSλ΅ λ³€κ²½λμ—μ. μ‚¬μ‹¤μƒ κ°™μ€ κ°λ…μ΄λ©° μ¤νλ ¤ SSLλ΅ λ” λ§μ΄ ν‘ν„λ¨.

</br>

### SSL λ””μ§€ν„Έ μΈμ¦μ„

SSL μΈμ¦μ„λ” ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„κ°„μ ν†µμ‹ μ„ μ 3μκ°€ λ³΄μ¦ν•΄μ£Όλ” μ „μν™”λ λ¬Έμ„λ‹¤. ν΄λΌμ΄μ–ΈνΈκ°€ μ„λ²„μ— μ ‘μ†ν• μ§ν›„μ— μ„λ²„λ” ν΄λΌμ΄μ–ΈνΈμ—κ² μ΄ μΈμ¦μ„ μ •λ³΄λ¥Ό μ „λ‹¬ν•λ‹¤. ν΄λΌμ΄μ–ΈνΈλ” μ΄ μΈμ¦μ„ μ •λ³΄κ°€ μ‹ λΆ°ν•  μ μλ” κ²ƒμΈμ§€λ¥Ό κ²€μ¦ ν• ν›„μ— λ‹¤μ μ μ°¨λ¥Ό μν–‰ν•κ² λλ‹¤. 

</br>

#### SSL μΈμ¦μ„μ μ΄μ 

- ν†µμ‹  λ‚΄μ©μ΄ κ³µκ²©μμ—κ² λ…Έμ¶λλ” κ²ƒμ„ λ§‰μ„ μ μλ‹¤. 
- ν΄λΌμ΄μ–ΈνΈκ°€ μ ‘μ†ν•λ ¤λ” μ„λ²„κ°€ μ‹ λΆ° ν•  μ μλ” μ„λ²„μΈμ§€λ¥Ό νλ‹¨ν•  μ μλ‹¤.
- ν†µμ‹  λ‚΄μ©μ μ•…μμ μΈ λ³€κ²½μ„ λ°©μ§€ν•  μ μλ‹¤. 

</br>

#### SSLμ—μ„ μ‚¬μ©ν•λ” μ•”νΈν™”μ μΆ…λ¥

SSLμ—μ„ μ‚¬μ©ν•λ” μ•”νΈν™” κΈ°λ²•μΌλ΅λ” λ€μΉ­ν‚¤ μ•”νΈν™”μ™€ κ³µκ°ν‚¤ μ•”νΈν™”κ°€ μλ‹¤.

- `λ€μΉ­ν‚¤ μ•”νΈν™”` : μ•”νΈν™” λ° λ³µνΈν™”μ— λ‹¨ ν•λ‚μ ν‚¤λ¥Ό μ‚¬μ©. μ—°μ‚° μ†λ„κ°€ λΉ λ¥΄μ§€λ§ ν‚¤ κ³µμ  κ³Όμ •μ— μ–΄λ ¤μ›€μ΄ μλ‹¤.
- `κ³µκ°ν‚¤ μ•”νΈν™”` : μ•”νΈν™” λ° λ³µνΈν™”μ— ν• μμ ν‚¤λ¥Ό μ‚¬μ©(κ³µκ°ν‚¤μ™€ κ°μΈν‚¤). ν‚¤λ¥Ό κ³µμ ν•κΈ° μμ›”ν•μ§€λ§ μ—°μ‚° μ†λ„κ°€ λλ¦¬λ‹¤.

SSLμ€ μ„±λ¥μƒμ μ΄μ λ΅ λ‘κ°€μ§€ μ•”νΈν™” κΈ°λ²•μ„ λ™μ‹μ— μ΄μ©ν•λ‹¤.

</br>

#### SSL μΈμ¦μ„μ λ©μ 

μΈμ¦μ„μ λ©μ μ€ λ‘ κ°€μ§€κ°€ μλ‹¤.

1. ν΄λΌμ΄μ–ΈνΈκ°€ μ ‘μ†ν•λ ¤λ” μ›Ή μ‚¬μ΄νΈ(μ„λ²„)κ°€ **μ‹ λΆ° ν•  μ μλ” μ‚¬μ΄νΈμΈμ§€ λ³΄μ¥**

2. SSL ν†µμ‹ μ— μ‚¬μ©ν•  **κ³µκ°ν‚¤λ¥Ό ν΄λΌμ΄μ–ΈνΈ(λΈλΌμ°μ €)μ—κ² μ κ³µ**

</br>

#### SSL μΈμ¦μ„μ μ„λΉ„μ¤ λ³΄μ¦λ°©λ²•

1. μ›ΉλΈλΌμ°μ €κ°€ μ„λ²„μ— μ ‘μ†ν•λ©΄ μ„λ²„λ” μ μΌ λ¨Όμ € μΈμ¦μ„λ¥Ό μ κ³µν•λ‹¤. (μ„λ²„λ” κ°μΈν‚¤λ¥Ό κ°€μ§€κ³  μΈμ¦μ„λ¥Ό μ•”νΈν™”ν•λ‹¤.)
2. μ›ΉλΈλΌμ°μ €λ” μΈμ¦μ„λ¥Ό λ°κΈ‰ν• CAκ°€ μμ‹ μ΄ κ°–κ³  μλ” CA λ¦¬μ¤νΈμ— μλ”μ§€ ν™•μΈν•λ‹¤.
3. λ¦¬μ¤νΈμ— μλ‹¤λ©΄ ν•΄λ‹Ή CAμ κ³µκ°ν‚¤λ¥Ό μ΄μ©ν•΄μ„ μΈμ¦μ„λ¥Ό λ³µνΈν™” ν•λ‹¤.
4. μΈμ¦μ„λ¥Ό λ³µνΈν™” ν•  μ μλ‹¤λ” κ²ƒμ€ μ΄ μΈμ¦μ„κ°€ CAμ λΉ„κ³µκ°ν‚¤μ— μν•΄μ„ μ•”νΈν™” λ κ²ƒμ„ μλ―Έν•λ‹¤. μ¦‰ λ°μ΄ν„°λ¥Ό μ κ³µν• μ‚¬λμ μ‹ μ›μ„ λ³΄μ¥ν•΄μ£Όκ² λλ” κ²ƒμ΄λ‹¤.

</br>

####SSL λ™μ‘ λ°©λ²•

- μ• ν”λ¦¬μΌ€μ΄μ… μ„λ²„λ¥Ό μ΄μν•λ” κΈ°μ—…μ€ CAλ¥Ό ν†µν•΄ μΈμ¦μ„λ¥Ό λ§λ“ λ‹¤.
  1. μ• ν”λ¦¬μΌ€μ΄μ… μ„λ²„λ¥Ό μ΄μν•λ” κΈ°μ—…μ€ HTTPS μ μ©μ„ μ„ν•΄ κ³µκ°ν‚¤μ™€ κ°μΈν‚¤λ¥Ό λ§λ“ λ‹¤.
  2. μ‹ λΆ°ν•  μ μλ” CA κΈ°μ—…μ„ μ„ νƒν•κ³  μΈμ¦μ„ μƒμ„±μ„ μ”μ²­ν•λ‹¤.
  3. CAλ” μ„λ²„μ κ³µκ°ν‚¤, μ•”νΈν™” λ°©λ²• λ“±μ μ •λ³΄λ¥Ό λ‹΄μ€ μΈμ¦μ„λ¥Ό λ§λ“¤κ³  ν•΄λ‹Ή CAμ κ°μΈν‚¤λ΅ μ•”νΈν™”ν•μ—¬ μ„λ²„μ— μ κ³µν•λ‹¤.
  4. ν΄λΌμ΄μ–ΈνΈκ°€ SSLλ΅ μ•”νΈν™”λ νμ΄μ§€λ¥Ό μ”μ²­ μ‹ μ„λ²„λ” μΈμ¦μ„λ¥Ό μ „μ†΅ν•λ‹¤.
- ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„μ ν†µμ‹  νλ¦„ κ³Όμ •
  1. ν΄λΌμ΄μ–ΈνΈκ°€ SSLλ΅ μ•”νΈν™”λ νμ΄μ§€λ¥Ό μ”μ²­
  2. μ„λ²„λ” ν΄λΌμ΄μ–ΈνΈμ—κ² μΈμ¦μ„λ¥Ό μ „μ†΅
  3. ν΄λΌμ΄μ–ΈνΈλ” μΈμ¦μ„κ°€ μ‹ μ©μ΄ μλ” CAλ΅λ¶€ν„° μ„λ…λ κ²ƒμΈμ§€ νλ‹¨. λΈλΌμ°μ €λ” CA λ¦¬μ¤νΈμ™€ ν•΄λ‹Ή CAμ κ³µκ°ν‚¤λ¥Ό κ°€μ§€κ³  μλ‹¤. κ³µκ°ν‚¤λ¥Ό ν™μ©ν•μ—¬ μΈμ¦μ„κ°€ λ³µνΈν™”κ°€ κ°€λ¥ν•λ‹¤λ©΄ μ ‘μ†ν• μ‚¬μ΄νΈκ°€ CAμ— μν•΄ κ²€ν† λμ—λ‹¤λ” κ²ƒμ„ μλ―Έν•λ‹¤. λ”°λΌμ„ μ„λ²„κ°€ μ‹ μ©μ΄ μλ‹¤κ³  νλ‹¨. κ³µκ°ν‚¤κ°€ λ°μ΄ν„°λ¥Ό μ κ³µν• μ‚¬λμ μ‹ μ›μ„ λ³΄μ¥ν•΄μ£Όλ” κ²ƒμΌλ΅ μ΄λ¬ν• κ²ƒμ„ μ „μ μ„λ…μ΄λΌκ³  ν•¨
  4. ν΄λΌμ΄μ–ΈνΈλ” CAμ κ³µκ°ν‚¤λ¥Ό μ΄μ©ν•΄ μΈμ¦μ„λ¥Ό λ³µνΈν™”ν•κ³  μ„λ²„μ κ³µκ°ν‚¤λ¥Ό νλ“
  5. ν΄λΌμ΄μ–ΈνΈλ” μ„λ²„μ κ³µκ°ν‚¤λ¥Ό μ‚¬μ©ν•΄ λλ¤ λ€μΉ­ μ•”νΈν™”ν‚¤, λ°μ΄ν„° λ“±μ„ μ•”νΈν™”ν•μ—¬ μ„λ²„λ΅ μ „μ†΅ν•λ‹¤.
  6. μ„λ²„λ” μμ‹ μ κ°μΈν‚¤λ¥Ό μ΄μ©ν•΄ λ³µνΈν™”ν•κ³  λλ¤ λ€μΉ­ μ•”νΈν™”ν‚¤, λ°μ΄ν„° λ“±μ„ νλ“ν•λ‹¤.
  7. μ„λ²„λ” λλ¤ λ€μΉ­ μ•”νΈν™”ν‚¤λ΅ ν΄λΌμ΄μ–ΈνΈ μ”μ²­μ— λ€ν• μ‘λ‹µμ„ μ•”νΈν™”ν•μ—¬ μ „μ†΅ν•λ‹¤.
  8. ν΄λΌμ΄μ–ΈνΈλ” λλ¤ λ€μΉ­ μ•”νΈν™”ν‚¤λ¥Ό μ΄μ©ν•΄ λ³µνΈν™”ν•κ³  λ°μ΄ν„°λ¥Ό μ΄μ©ν•λ‹¤.
- μΈμ¦μ„μ— ν¬ν•¨λ λ‚΄μ©
  - μ„λ²„ μΈ΅ κ³µκ°ν‚¤
  - κ³µκ°ν‚¤ μ•”νΈν™” λ°©λ²•
  - μΈμ¦μ„λ¥Ό μ‚¬μ©ν• μ›Ήμ„λ²„μ URL
  - μΈμ¦μ„λ¥Ό λ°ν–‰ν• κΈ°κ΄€ μ΄λ¦„

<br>

#### SSL ν†µμ‹  κ³Όμ •

HTTPSμ—μ„μ ν΄λΌμ΄μ–ΈνΈ μ„λ²„κ°„μ μ—°κ²°μ€ HTTPμ—μ„μ '3HandShake' κ³Όμ •μ— λ”ν•μ—¬ 'SSL HandShake' κ³Όμ •μ΄ μ¶”κ°€ λλ‹¤.

**3HandShake μ”μ•½**

1. ν΄λΌμ΄μ–ΈνΈμ μ—°κ²°μ”μ²­
2. μ„λ²„μ μ‘λ‹µκ³Ό μ—°κ²°μ”μ²­
3. ν΄λΌμ΄μ–ΈνΈμ μ‘λ‹µ

**SSL HandShake μ”μ•½**

1. ClientHello : Clientκ°€ Serverμ—κ² μ•”νΈν™”μ— ν•„μ”ν• μμ‹ μ΄ κ°€μ§„ λ°μ΄ν„°λ¥Ό μ „μ†΅
2. ServerHello : ν΄λΌμ΄μ–ΈνΈκ°€ λ³΄λ‚΄μ¨ μ•”νΈν™” λ°©λ²•λ“¤μ¤‘ ν•λ‚λ¥Ό μ„ νƒ Certificate : μ„λ²„μ μΈμ¦μ„λ¥Ό μ „λ‹¬ ServerHelloDone : μ„λ²„ μ „λ‹¬ μΆ…λ£
3. Client Key Exchange : μΈμ¦μ„λ¥Ό CAλ¥Ό ν†µν•΄ μ ν¨μ„± μ²΄ν¬ λ° κ³µκ°ν‚¤ νλ“ λ° λ€μΉ­ν‚¤ μ „λ‹¬ ChangeCipherSpec && Finished (Client) : ν‘μν• μ•κ³ λ¦¬μ¦μ— λ”°λΌ ν†µμ‹ ν•  κ²ƒμ„μ„ μ•λ¦Ό
4. ChangeCipherSpec && Finished (Server) : ν΄λΌμ΄μ–ΈνΈκ°€ λ³΄λ‚Έ λ©”μ„Έμ§€ ν™•μΈν›„, handshakeλ¥Ό λλ‚΄λ©° ν΄λΌμ΄μ–ΈνΈμ™€ ν‘μν•λ€λ΅ ν†µμ‹ ν•κ² λ‹¤κ³  μ¬μ•λ¦Ό

</br>

### λ€μΉ­ν‚¤ vs κ³µκ°ν‚¤

#### λ€μΉ­ν‚¤(=λΉ„κ³µκ°ν‚¤)

- μ•”νΈν™”μ— μ‚¬μ©λλ” ν‚¤μ™€ λ³µνΈν™”μ— μ‚¬μ©λλ” ν‚¤κ°€ λ™μΌν• μ•”νΈν™” κΈ°λ²•
- μ•”νΈν™”ν• μ •λ³΄λ¥Ό λ„κµ°κ°€μ—κ² λ³΄λ‚Ό λ•, μ•”νΈν‚¤λ„ ν•¨κ» λ³΄λ‚΄μ•Ό ν•λ‹¤. μ•”νΈν‚¤λ¥Ό λ¶„μ‹¤ν•κ±°λ‚ λ…Έμ¶λλ©΄ λ³΄μ•μ— λ§¤μ° μ·¨μ•½ν•  μ μλ‹¤.
- ν‚¤ μ „λ‹¬ λ° κ΄€λ¦¬μ— μ–΄λ ¤μ›€μ΄ μμ§€λ§, λ€μΉ­ν‚¤ μ•”νΈν™” λ°©μ‹μ€ μ•”νΈν™” μ—°μ‚° μ†λ„κ°€ λΉ λ¥΄κΈ° λ•λ¬Έμ— ν¨μ¨μ μΈ μ•”νΈν™” μ‹μ¤ν…μ„ κµ¬μ¶•ν•  μ μλ‹¤λ” μ¥μ μ΄ μλ‹¤.

#### κ³µκ°ν‚¤(=λΉ„λ€μΉ­ν‚¤)

- μ•”νΈν™”μ— μ‚¬μ©ν•λ” ν‚¤μ™€ λ³µνΈν™”μ— μ‚¬μ©ν•λ” ν‚¤λ¥Ό λ¶„λ¦¬
- μμ‹ μ΄ κ°€μ§€κ³  μλ” κ³ μ ν• μ•”νΈν‚¤(κ°μΈν‚¤ νΉμ€ λΉ„λ°€ν‚¤)λ΅λ§ λ³µνΈν™”ν•  μ μλ” μ•”νΈν‚¤(κ³µκ°ν‚¤)λ¥Ό λ€μ¤‘μ—κ² κ³µκ°ν•λ‹¤.
- λ€μΉ­ν‚¤ μ•”νΈν™” λ°©μ‹μ ν‚¤ μ „λ‹¬ λ¬Έμ λ¥Ό ν•΄κ²°ν–μ§€λ§ μ•”νΈν™”, λ³µνΈν™”λ¥Ό μ„ν•΄ λ³µμ΅ν• μν•™ μ—°μ‚°μ„ μν–‰ν•κΈ° λ•λ¬Έμ— λ€μΉ­ν‚¤ λ°©μ‹μ— λΉ„ν•΄ μ†λ„κ°€ λλ¦¬κ³  λ³µμ΅ν•λ‹¤λ” λ‹¨μ μ΄ μλ‹¤.

λ€μΉ­ν‚¤ μ•”νΈν™”μ μ¥μ κ³Ό κ³µκ°ν‚¤ μ•”νΈν™”μ μ¥μ μ„ μ±„νƒν•μ—¬ μ©λ‰μ΄ ν° μ •λ³΄λ” λ€μΉ­ν‚¤λ΅ μ•”νΈν™”ν•κ³ , μ•”νΈν™”μ— μ‚¬μ©λ λ€μΉ­ν‚¤λ” κ³µκ°ν‚¤λ΅ μ•”νΈν™”ν•μ—¬ λ€μƒμ—κ² μ „λ‹¬ν•λ” ν•μ΄λΈλ¦¬λ“ μ•”νΈν™” λ°©λ²•μ΄ μΌλ°μ μΌλ΅ μ‚¬μ©λκ³  μλ‹¤.

</br>

### μ°Έκ³ 

> - [HTTPSμ™€ SSL μΈμ¦μ„](https://opentutorials.org/course/228/4894)
> - [HTTPSμ™€ SSL μΈμ¦μ„, SSL λ™μ‘λ°©λ²•](https://wayhome25.github.io/cs/2018/03/11/ssl-https/)
> - [π™[HTTPS] HTTPS μ™€ SSL μΈμ¦μ„πµ](https://victorydntmd.tistory.com/95)
>
> - https://www.notion.so/CS-9bc6faf434904ec2b870c84f8c06280a